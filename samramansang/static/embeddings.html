<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embeddings Visualization (2D)</title>
    <style>
        body { font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial; margin:0; padding:20px; background:#0f172a; color:#e2e8f0; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { margin: 0 0 16px; font-size: 22px; }
        .card { background:#111827; border:1px solid #1f2937; border-radius: 10px; padding:16px; margin-bottom: 16px; }
        .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
        label { opacity: 0.9; }
        input, select, button { background:#0b1220; color:#e2e8f0; border:1px solid #243041; border-radius:8px; padding:8px 10px; }
        button { cursor:pointer; }
        button:disabled { opacity:0.5; cursor:not-allowed; }
        .canvas-wrap { position: relative; }
        canvas { background:#0b1220; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.35); display:block; }
        .status { font-size: 13px; opacity:0.9; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§­ Embeddings Visualization (UMAP/TSNE 2D)</h1>
        <div class="card">
            <div class="row">
                <button id="autoLoadBtn">Auto Load</button>
                <label>Point Size</label>
                <input type="number" id="ptSize" value="3" min="1" max="10" style="width:70px;">
                <label>Opacity</label>
                <input type="number" id="ptAlpha" value="0.9" min="0.1" max="1" step="0.1" style="width:80px;">
                <button id="resetBtn">Reset</button>
            </div>
            <div class="row status" style="margin-top:8px;">
                <div id="status">Click "Auto Load" to start.</div>
            </div>
            <div class="row status" id="fileInfo" style="display:none;">
                <div id="fileInfoText"></div>
            </div>
        </div>

        <div class="card">
            <div class="canvas-wrap">
                <div style="display:flex; gap:16px; align-items:flex-start;">
                    <canvas id="vizCanvas" width="900" height="700"></canvas>
                    <div>
                        <canvas id="poseCanvas" width="300" height="300" style="background:#0b1220; border-radius:8px;"></canvas>
                        <div id="hoverInfo" class="status" style="margin-top:8px;">Hover a point.</div>
                        <div id="legend" class="status" style="margin-top:16px; display:none;">
                            <div style="font-weight:bold; margin-bottom:8px;">Cluster Legend:</div>
                            <div id="legendItems"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/npyjs@0.4.1/dist/npyjs.min.js"></script>
    <script type="module" src="/static/js/embeddings-viz.js"></script>
</body>
</html>


